extends ../layouts/app

block content
  article.content
    header
      h1 Пользователи
        a(href="/dashboard/users/create").btn.btn-primary.pull-right
          i.fa.fa-plus
          | Добавить
    table.table
      thead
        tr
          th #
          th Идентификатор
          th Имя
          th Группа
          th Фамилия
          th Телефон
          th(colspan="2") Отдел
      tbody
        if (Array.isArray(users) && !!users.length)
          each user, index in users
            tr
              td= index + 1
              td= user.login
              td= user.name
              case user.group
                when 'saller'
                  td Продавец
                when 'manager'
                  td Менеджер
                when 'accountant'
                  td Бухгалтер
                default
                  td
              td= user.lastname
              td= user.telephone
              if (Array.isArray(departaments) && !!departaments.length)
                each departament, index in departaments
                  if (departament.id === user.departament)
                    td= departament.name
                  else
                    td
              td.table-controls
                a(href="/dashboard/users/edit/#{user.id}").btn.btn-default.btn-primary
                  i.fa.fa-pencil
                a(href="/dashboard/users/destroy/#{user.id}").btn.btn-default.btn-danger
                  i.fa.fa-trash
        else
          tr
            td(colspan="4").text-center На данный момент раздел пуст
